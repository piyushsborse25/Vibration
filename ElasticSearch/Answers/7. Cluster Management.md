---

## **7. Cluster Management (Q31–Q35)**

---

**31. What are the possible cluster health statuses and their meanings?**

- **Answer:**
    
    - **Green** – All primary and replica shards are allocated.
        
    - **Yellow** – All primary shards allocated, but one or more replicas are unassigned.
        
    - **Red** – One or more primary shards are unassigned (data is unavailable).
        
- **Pitfall Note:** Yellow is not immediately dangerous, but if a primary fails during yellow state, data loss can happen.
    

---

**32. How can you prevent Elasticsearch from allocating shards to certain nodes?**

- **Answer:**
    
    - Use shard allocation filtering:
        
        ```json
        PUT _settings
        {
          "index.routing.allocation.include._name": "node1"
        }
        ```
        
        Or exclude nodes using `exclude._name`.
        
- **Pitfall Note:** Wrong allocation settings can make shards permanently unassigned until changed.
    

---

**33. What is the difference between a node master and a master-eligible node?**

- **Answer:**
    
    - **Node master**: The elected master node currently managing the cluster state.
        
    - **Master-eligible node**: Any node with `node.master: true` that can become master.
        
- **Pitfall Note:** If all master-eligible nodes go down, the cluster becomes inoperable for write operations.
    

---

**34. How can you ensure high availability for the Elasticsearch cluster master?**

- **Answer:**
    
    - Use **at least 3 master-eligible nodes** to prevent split-brain scenarios.
        
    - Configure `discovery.zen.minimum_master_nodes` (in older ES versions) or quorum-based settings in newer ones.
        
- **Pitfall Note:** Having exactly 2 master-eligible nodes is risky — one failure can stop the cluster.
    

---

**35. What is split-brain in Elasticsearch and how to avoid it?**

- **Answer:**
    
    - **Split-brain**: Multiple nodes believe they are master due to network partition, causing data inconsistency.
        
    - Avoid by having an odd number of master-eligible nodes and correct quorum settings.
        
- **Pitfall Note:** Split-brain can silently corrupt data — prevention is better than recovery.
    

---